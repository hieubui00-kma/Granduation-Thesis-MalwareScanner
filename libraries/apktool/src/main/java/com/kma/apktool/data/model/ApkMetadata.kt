package com.kma.apktool.data.model

data class ApkMetadata constructor(
    val packageName: String,

    val name: String,

    val versionCode: String,

    val versionName: String,

    val userFeatures: Set<String>,

    val permissions: Set<String>,

    val activities: Set<String>,

    val services: Set<String>,

    val receivers: Set<String>,

    val providers: Set<String>,
) {

    class Builder {
        var packageName: String? = null

        var name: String? = null

        var versionCode: String? = null

        var versionName: String? = null

        val userFeatures = mutableListOf<String?>()

        val permissions = mutableListOf<String?>()

        val activities = mutableListOf<String?>()

        val services = mutableListOf<String?>()

        val receivers = mutableListOf<String?>()

        val providers = mutableListOf<String?>()

        fun build() = ApkMetadata(
            packageName = packageName.orEmpty(),
            name = name.orEmpty(),
            versionCode = versionCode.orEmpty(),
            versionName = versionName.orEmpty(),
            userFeatures = userFeatures.filterNotNull().toSet(),
            permissions = permissions.filterNotNull().toSet(),
            activities = activities.filterNotNull().toSet(),
            services = services.filterNotNull().toSet(),
            receivers = receivers.filterNotNull().toSet(),
            providers = providers.filterNotNull().toSet(),
        )
    }
}
