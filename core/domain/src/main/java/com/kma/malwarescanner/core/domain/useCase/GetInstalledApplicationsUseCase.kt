package com.kma.malwarescanner.core.domain.useCase

import com.kma.malwarescanner.core.domain.data.model.Application
import com.kma.malwarescanner.core.domain.data.repository.ApplicationRepository
import kotlinx.coroutines.CoroutineDispatcher
import kotlinx.coroutines.withContext
import javax.inject.Inject
import javax.inject.Named

class GetInstalledApplicationsUseCase @Inject constructor(
    private val applicationRepository: ApplicationRepository,

    @Named("default")
    private val defaultDispatcher: CoroutineDispatcher
) {

    suspend operator fun invoke(): List<Application> = withContext(defaultDispatcher) {
        return@withContext applicationRepository
            .getInstalledApplications()
            .sortedBy { application -> application.name }
    }
}
