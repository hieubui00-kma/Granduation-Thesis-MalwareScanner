package com.kma.malwarescanner.core.data.util

import kotlinx.coroutines.Dispatchers
import kotlinx.coroutines.withContext
import java.io.File
import java.io.InputStream
import kotlin.coroutines.CoroutineContext

suspend fun InputStream.copyTo(
    file: File,
    bufferSize: Int = DEFAULT_BUFFER_SIZE,
    context: CoroutineContext = Dispatchers.IO
) = withContext(context = context) {
    file.outputStream().use { outputStream -> copyTo(out = outputStream, bufferSize = bufferSize) }
}
